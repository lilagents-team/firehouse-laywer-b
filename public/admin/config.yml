backend:
  name: github
  repo: lilagents-team/firehouse-laywer-b
  branch: main
  # Using Netlify's built-in authentication (since site is hosted on Netlify)
  base_url: https://api.netlify.com
  auth_endpoint: auth

# Main media folder for images
media_folder: public/images/uploads
public_folder: /images/uploads

# For newsletter PDFs, we'll use a separate collection-specific media folder

collections:
  - name: "pages"
    label: "Pages"
    files:
      - name: "home"
        label: "Home Page"
        file: "content/pages/home.md"
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "Hero Headline", name: "hero_headline", widget: "string" }
          - { label: "Hero Subtext", name: "hero_subtext", widget: "text" }
          - { label: "Hero Image", name: "hero_image", widget: "image" }
          - { label: "About Section Title", name: "about_title", widget: "string" }
          - { label: "About Section Content", name: "about_content", widget: "markdown" }
          - { label: "About Image", name: "about_image", widget: "image" }
          
      - name: "practice-areas"
        label: "Practice Areas"
        file: "content/pages/practice-areas.md"
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "Subtitle", name: "subtitle", widget: "string" }
          - { label: "Mergers Section Title", name: "mergers_title", widget: "string" }
          - { label: "Mergers Content", name: "mergers_content", widget: "markdown" }
          - { label: "Mergers Image", name: "mergers_image", widget: "image" }
          - { label: "Public Records Title", name: "public_records_title", widget: "string" }
          - { label: "Public Records Content", name: "public_records_content", widget: "markdown" }
          - { label: "Public Records Image", name: "public_records_image", widget: "image" }
          - { label: "Board Retreats Title", name: "board_retreats_title", widget: "string" }
          - { label: "Board Retreats Content", name: "board_retreats_content", widget: "markdown" }
          - { label: "Board Retreats Image", name: "board_retreats_image", widget: "image" }
          
      - name: "attorneys"
        label: "Attorneys Page"
        file: "content/pages/attorneys.md"
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "Subtitle", name: "subtitle", widget: "string" }
          
      - name: "newsletter"
        label: "Newsletter Page"
        file: "content/pages/newsletter.md"
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "Subtitle", name: "subtitle", widget: "string" }
          - { label: "Latest Issue Title", name: "latest_title", widget: "string" }
          - { label: "Latest Issue Description", name: "latest_description", widget: "text" }
          - { label: "Latest Issue Content", name: "latest_content", widget: "markdown" }
          - { label: "Latest Issue PDF URL", name: "latest_pdf_url", widget: "string" }
          
      - name: "contact"
        label: "Contact Page"
        file: "content/pages/contact.md"
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "Subtitle", name: "subtitle", widget: "string" }
          - { label: "Office Address", name: "office_address", widget: "text" }
          - { label: "Emergency Hours Note", name: "emergency_note", widget: "string" }

  - name: "attorneys"
    label: "Attorney Profiles"
    folder: "content/attorneys"
    create: true
    slug: "{{slug}}"
    fields:
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Phone", name: "phone", widget: "string" }
      - { label: "Email", name: "email", widget: "string" }
      - { label: "Bio", name: "bio", widget: "markdown" }
      - { label: "Education", name: "education", widget: "markdown" }
      - { label: "Experience", name: "experience", widget: "markdown" }
      - { label: "Bar Admissions", name: "bar_admissions", widget: "string" }
      - { label: "Photo", name: "photo", widget: "image", required: false }
      - { label: "Order", name: "order", widget: "number", default: 1 }

  - name: "practice_areas"
    label: "Practice Areas"
    folder: "content/practice-areas"
    create: true
    slug: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Description", name: "description", widget: "text" }
      - { label: "Content", name: "content", widget: "markdown" }
      - { label: "Icon", name: "icon", widget: "select", options: ["Building2", "FileText", "Users", "Shield", "DollarSign", "ClipboardCheck"] }
      - { label: "Order", name: "order", widget: "number", default: 1 }

  - name: "newsletters"
    label: "Newsletter Issues"
    folder: "content/newsletters"
    create: true
    slug: "{{slug}}"
    media_folder: "public/Newsletters"
    public_folder: "/Newsletters"
    summary: "Vol {{volume}} Ed {{edition}}: {{title}}"
    identifier_field: "title"
    fields:
      # 1. REQUIRED NEWSLETTER INFORMATION
      - { label: "Title", name: "title", widget: "string", hint: "Full newsletter title (e.g., March 2025 Fire Department Legal Updates)" }
      - { label: "Volume", name: "volume", widget: "number", min: 1, max: 50, hint: "Usually corresponds to year (2025 = Volume 23)" }
      - { label: "Edition", name: "edition", widget: "number", min: 1, max: 12, hint: "Issue number for the year (1-12)" }
      - label: "Publication Month & Year"
        name: "date" 
        widget: "datetime"
        time_format: false
        date_format: "YYYY-MM"
        format: "YYYY-MM-01"
        hint: "Select the month and year this newsletter was published"
      - { label: "Summary", name: "summary", widget: "text", hint: "1-2 sentences about what's covered in this newsletter" }
      
      # 2. PDF UPLOAD (MOST IMPORTANT)
      - { label: "Newsletter PDF", name: "newsletter_pdf", widget: "file", hint: "Upload the newsletter PDF file - drag and drop or click to browse" }
      
      # 3. SEARCH & CATEGORIZATION
      - { label: "Keywords", name: "keywords", widget: "list", hint: "Search terms lawyers might use (one per line): SCOTUS, Public Records, RCW 42.56, Employment Law" }
      - { label: "Topics", name: "topics", widget: "select", multiple: true, options: ["Employment Law", "Public Records", "Emergency Services", "Contract Law", "Budget & Finance", "Labor Law", "Safety Regulations", "Public Agencies", "Open Government", "Training Requirements"], hint: "Select 2-3 most relevant categories" }
      
      # 4. LEGAL REFERENCES (OPTIONAL BUT HELPFUL)
      - label: "Legal Cases"
        name: "legal_cases"
        widget: "list"
        required: false
        hint: "Court cases mentioned (format: Smith v. Fire District (2025))"
      - label: "Legal Statutes"
        name: "legal_statutes"
        widget: "list"
        required: false
        hint: "Laws referenced (format: RCW 42.56.280)"
      
      # 5. KEY CONTENT (OPTIONAL)
      - label: "Key Findings"
        name: "key_findings"
        widget: "list"
        required: false
        hint: "Main legal conclusions from this newsletter"
      - label: "Recommendations"
        name: "recommendations"
        widget: "list"
        required: false
        hint: "Actionable advice for fire departments"
      
      # 6. TECHNICAL FIELDS (USUALLY AUTO-FILLED)
      - { label: "Content", name: "content", widget: "markdown", required: false, hint: "Newsletter content (auto-generated or manual entry)" }
      - { label: "PDF Filename", name: "source_pdf", widget: "string", required: false, hint: "Auto-generated from upload, or enter manually if needed" }
      - { label: "Featured", name: "featured", widget: "boolean", default: false, required: false }
      - { label: "Metadata Quality", name: "metadata_quality", widget: "select", options: ["high", "medium", "low"], default: "high", required: false }

  - name: "settings"
    label: "Site Settings"
    files:
      - name: "general"
        label: "General Settings"
        file: "content/settings/general.md"
        fields:
          - { label: "Site Title", name: "site_title", widget: "string" }
          - { label: "Site Description", name: "site_description", widget: "text" }
          - { label: "Firm Name", name: "firm_name", widget: "string" }
          - { label: "Tagline", name: "tagline", widget: "string" }
          - { label: "Phone", name: "phone", widget: "string" }
          - { label: "Email", name: "email", widget: "string" }
          - { label: "Address", name: "address", widget: "text" }
          - { label: "Office Hours", name: "office_hours", widget: "text" }
          - { label: "Social Media", name: "social", widget: "object", fields: [
              { label: "Facebook URL", name: "facebook", widget: "string", required: false },
              { label: "Twitter URL", name: "twitter", widget: "string", required: false },
              { label: "LinkedIn URL", name: "linkedin", widget: "string", required: false }
            ]}

  - name: "newsletter_comments" 
    label: "Newsletter Comments"
    folder: "content/comments"
    create: true
    slug: "{{id | padStart(6, '0')}}"
    summary: "{{topic}}: {{subtopic}} ({{year}}-{{month}})"
    identifier_field: "id"
    fields:
      # Sequential ID
      - { label: "ID", name: "id", widget: "number", value_type: "int", min: 1, hint: "Sequential comment ID" }
      
      # Newsletter Reference
      - { label: "Newsletter File", name: "newsletter", widget: "string", hint: "Original newsletter PDF filename (e.g., v01n07nov1997.pdf)" }
      - { label: "Volume/Issue", name: "volume_issue", widget: "string", pattern: ["^\\d{2}-\\d{2}$", "Format: XX-XX (e.g., 01-07)"], hint: "Volume-Issue format (e.g., 01-07)" }
      - { label: "Year", name: "year", widget: "number", value_type: "int", min: 1995, max: 2030 }
      - { label: "Month", name: "month", widget: "number", value_type: "int", min: 1, max: 12, hint: "Month as number (1-12)" }
      
      # Topic Classification
      - label: "Topic"
        name: "topic" 
        widget: "relation"
        collection: "newsletter_comments"
        search_fields: ["topic"]
        display_fields: ["topic"]
        value_field: "topic"
        hint: "Start typing to search existing topics or enter a new one"
          
      - { label: "Subtopic", name: "subtopic", widget: "string", required: false, hint: "Specific subtopic within the main topic" }
      
      # Content
      - { label: "Commentary", name: "body", widget: "markdown", hint: "Newsletter commentary content" }